# Backend Infrastructure Implementation Guide

## ðŸš¨ CRITICAL PROJECT RECOVERY INSTRUCTIONS
**Purpose**: Resolve DMS-v2-BMAD infrastructure crisis through systematic backend implementation
**Problem**: 189 sophisticated frontend API endpoints with 100% mocked backends
**Solution**: 3-phase emergency backend deployment with Epic 9/Story 8.3/Epic 10 integration

## AGENT EXECUTION SEQUENCE

### **IMMEDIATE START** - Phase 1: Foundation (Days 1-3)
**Agent Order:**
1. **Dev Agent** â†’ `phase-1-foundation-dev-agent.md`
2. **QA Agent** â†’ `phase-1-validation-qa-agent.md`

**Deliverables:**
- PostgreSQL deployed with Prisma schema
- NextAuth.js authentication system
- DatabaseService repository layer
- Critical API endpoints migrated

---

### **PRIORITY 2** - Phase 2: Mass Migration (Days 4-10)  
**Agent Order:**
1. **Dev Agent** â†’ `phase-2-migration-dev-agent.md`
2. **QA Agent** â†’ `phase-2-validation-qa-agent.md`

**Deliverables:**
- All 189 API endpoints connected to real database
- Epic 9 user management fully functional
- Story 8.3 achievement system integrated
- Zero frontend breaking changes

---

### **FINAL PHASE** - Phase 3: Epic 10 PWA (Days 11-14)
**Agent Order:**
1. **PM Agent** â†’ `phase-3-epic-implementation-pm-agent.md` 
2. **Dev Agent** â†’ `phase-3-epic-implementation-dev-agent.md`
3. **QA Agent** â†’ `phase-3-validation-qa-agent.md`

**Deliverables:**
- Epic 10 PWA features complete
- Production performance optimization
- Security hardening and audit
- Backup/recovery procedures tested

## QUICK REFERENCE - COPY THESE COMMANDS

### **START PHASE 1** (Copy to Dev Agent)
```
Please implement Phase 1 Foundation using the instructions in:
/docs/qa/backend-infrastructure/phase-1-foundation-dev-agent.md

Use Context7 and Sequential Thinking

Focus on:
- Supabase setup and Prisma deployment
- NextAuth.js authentication system
- DatabaseService repository pattern
- Critical API endpoint migration

Reference architecture: /docs/architecture.md
```

### **AFTER PHASE 1** (Copy to QA Agent)
```
Please validate Phase 1 Foundation using the instructions in:
/docs/qa/backend-infrastructure/phase-1-validation-qa-agent.md

Use Sequential Thinking

Focus on:
- Database deployment verification
- Authentication system testing
- API integration validation
- Performance baseline measurement
```

### **START PHASE 2** (Copy to Dev Agent after Phase 1 QA passes)
```
Please implement Phase 2 Migration using the instructions in:
/docs/qa/backend-infrastructure/phase-2-migration-dev-agent.md

Use Context7 and Sequential Thinking

Focus on:
- Systematic migration of all 189 API endpoints
- Epic 9 user management implementation
- Story 8.3 achievement system integration
- Frontend compatibility preservation
```

### **VALIDATE PHASE 2** (Copy to QA Agent after Phase 2 implementation)
```
Please validate Phase 2 Migration using the instructions in:
/docs/qa/backend-infrastructure/phase-2-validation-qa-agent.md

Use Sequential Thinking

Focus on:
- Complete API migration verification
- Epic 9 user management testing
- Story 8.3 achievement system validation
- Frontend integration confirmation
```

### **PLAN PHASE 3** (Copy to PM Agent after Phase 2 QA passes)
```
Please coordinate Phase 3 Epic Implementation using the instructions in:
/docs/qa/backend-infrastructure/phase-3-epic-implementation-pm-agent.md

Use Sequential Thinking

Focus on:
- Epic 10 story coordination (TI-001, TI-002, TI-003, TI-004)
- Timeline management for final sprint
- Agent coordination and handoffs
- Production readiness planning
```

### **IMPLEMENT PHASE 3** (Copy to Dev Agent during Phase 3)
```
Please implement Epic 10 PWA features using the instructions in:
/docs/qa/backend-infrastructure/phase-3-epic-implementation-dev-agent.md

Use Context7 and Sequential Thinking

Focus on:
- TI-001: PWA core functionality
- TI-002: Performance optimization (<3s load requirement)
- TI-003: Security hardening and encryption
- TI-004: Backup and recovery procedures
```

### **FINAL VALIDATION** (Copy to QA Agent for final sign-off)
```
Please perform final Epic 10 validation using the instructions in:
/docs/qa/backend-infrastructure/phase-3-validation-qa-agent.md

Use Sequential Thinking

Focus on:
- Epic 10 user story acceptance criteria
- Production readiness validation
- Security audit completion
- Performance requirements confirmation
```

## PROJECT SUCCESS TRACKING

### Phase Completion Checklist
- [ ] **Phase 1**: Foundation infrastructure deployed
- [ ] **Phase 2**: All 189 endpoints migrated + Epic 9 + Story 8.3
- [ ] **Phase 3**: Epic 10 PWA features + production readiness

### Critical Success Metrics
- [ ] **Infrastructure Crisis**: RESOLVED (189 real API endpoints)
- [ ] **Epic 9**: User management system operational
- [ ] **Story 8.3**: Achievement system with verification integration
- [ ] **Epic 10**: PWA features meeting field operation requirements
- [ ] **Performance**: <3 second load times achieved
- [ ] **Security**: Humanitarian data protection standards met

## EMERGENCY ESCALATION
**If Critical Issues Arise:**
1. **Technical Decisions**: Escalate to Architect Agent (`/BMad:agents:architect`)
2. **Timeline Issues**: Escalate to PM Agent for scope adjustment
3. **Quality Gates**: Use QA Agent sequential thinking for complex validation decisions

## PROJECT COMPLETION CELEBRATION ðŸŽ‰
**Upon successful completion of all phases:**
- **Infrastructure Crisis**: RESOLVED âœ…
- **Backend Implementation**: COMPLETE âœ…
- **Epic Integration**: ALL EPICS IMPLEMENTED âœ…
- **MVP Delivery**: READY FOR PRODUCTION âœ…

**The DMS-v2-BMAD humanitarian disaster management PWA is ready to save lives in the field!**